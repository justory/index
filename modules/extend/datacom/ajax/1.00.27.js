"use strict";define(["exports"],function(a){Object.defineProperty(a,"__esModule",{value:!0});var e={ajax:function(){for(var a=justory.configs,e=justory.msgini,t=arguments.length,o=Array(t),s=0;t>s;s++)o[s]=arguments[s];var r="function"==typeof o.last()?o.last():"",n=this.type||"get",u=this.upload||!1,i=o[0],l=o[1]||{},d=l||{},f={},c=!1,g=a.baseUrl,m={},p={};a.ajaxComBeforeSend(d,function(t){var o=t.params,s=t.headers;if(o&&o.length>0)for(var j=0;j<o.length;j++){var h=o[j].key,y=o[j].value;d[h]=y,o[j].alwaysGet&&[p[h]=y]}if(s&&s.length>0)for(var j=0;j<s.length;j++){var h=s[j].key,y=s[j].value;f[h]=y}"post"==n&&(i=i.indexOf("?")>-1?i+"&"+$$.param(p):i+"?"+$$.param(p),m={values:d},u&&[m.files=l]),console.log($$.param({bbbb:"2222"})),("get"==n||"jsonp"==n)&&(i=i.indexOf("?")>-1?i+"&"+$$.param(d):i+"?"+$$.param(d)),console.log(i),i.indexOf("http")>-1&&(g=""),console.log(456),justory.log("ajax send",{method:n,data:m,url:g+i});var v=function(t,o){justory.log("ajax result",{ret:t});var s=t.headers,n=t.body;if(n)a.ajaxComAfterSend(n,function(){r&&r(n,s)});else{var u="错误码："+o.code+"；错误信息："+o.msg+"；网络状态码："+o.statusCode,i=o.code;(""===i||void 0==i)&&(i="unknown"),justory.log("ajax message",{msg:u}),api.toast({msg:e.ajax[i]}),"root"!=api.winName&&setTimeout(function(){api.closeWin()},3e3)}};"jsonp"==n?$.ajax({type:"GET",data:m,url:g+i,timeout:a.ajaxTimeout,dataType:"jsonp",headers:f||{},success:function(a){v({headers:{},body:a},{code:1})}}):api.ajax({method:n,tag:tag||"",cache:c,data:m,url:g+i,timeout:a.ajaxTimeout,dataType:"json",charset:"utf-8",headers:f||{},returnAll:!0},function(a,e){v(a,e)})})}};a["default"]=e});